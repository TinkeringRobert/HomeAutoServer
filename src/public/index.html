<!DOCTYPE html>
<html ng-app="myApp">
<head lang="en">
    <meta charset="UTF-8">
    <title>POST-data naar een server</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://rawgit.com/rzajac/angularjs-slider/master/dist/rzslider.css"/>
</head>
<body>
<div class="container" ng-controller="myController as vm">
  <div style="width: 100%">
    <div style="float:left; width: 50%">
      <h3>Color Formulier</h3>

      <form id="color-form" role="form" style="display: block;">
        <div class="form-group">
          <h4>Red</h4>
          <rzslider rz-slider-model="vm.valueSlider.redValue" rz-slider-options="vm.valueSlider.options"></rzslider>
        </div>
        <div class="form-group">
          <h4>GReen</h4>
          <rzslider rz-slider-model="vm.valueSlider.greenValue" rz-slider-options="vm.valueSlider.options"></rzslider>
        </div>
        <div class="form-group">
          <h4>Blue</h4>
          <rzslider rz-slider-model="vm.valueSlider.blueValue" rz-slider-options="vm.valueSlider.options"></rzslider>
        </div>
        <div class="form-group">
            <button class="form-control btn btn-primary"
                    ng-click="vm.doSetColor()">Set Color
            </button>
        </div>
      </form>
    </div>
  </div>
  <div style="clear:both"></div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.3/angular.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.14.3/ui-bootstrap-tpls.js"></script>
<script src="https://rawgit.com/rzajac/angularjs-slider/master/dist/rzslider.js"></script>

<script>
    (function () {
        'use strict';
        angular.module('myApp', ['rzModule', 'ui.bootstrap'])
               .controller('myController', myController);

        myController.$inject = ['$http'];
        function myController($http) {
            var vm     = this;

            vm.onSliderChange = function (sliderId) {
              console.log("onSliderChange");
              console.log(vm.valueSlider);
              vm.doSetColor();
            };

            vm.valueSlider = {
              redValue: 100,
              blueValue: 100,
              greenValue: 100,
              options: {
                  floor: 0,
                  ceil: 255,
                  step: 1,
                  id: 'colorSlider',
                  onChange: vm.onSliderChange
              }
            };

            vm.doSetColor = function () {
              var url   = 'http://10.0.0.101:3000/user';
              console.log("params:");
              var red   = vm.valueSlider.redValue;
              var green = vm.valueSlider.greenValue;
              var blue  = vm.valueSlider.blueValue;
              console.log("params:" + vm.valueSlider.redValue + ":" + vm.valueSlider.greenValue + ":" + vm.valueSlider.blueValue);
              console.log("params:" + red + ":" + green + ":" + blue);
              $http({
                  method  : 'post',
                  headers : {
                      'Content-Type' : 'application/json'
                  },
                  url     : url,
                  data    : {
                      "red"   : red,
                      "green" : green,
                      "blue"  : blue
                  }
              }).then(function (response) {
                  console.log(response.data);
                  vm.response = response.data;
              }).catch(function (err) {
                  vm.response = err;
              });
            }
        }
    })();
</script>
</body>
</html>
